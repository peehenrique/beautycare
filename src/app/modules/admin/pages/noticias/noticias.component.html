<div class="container white">
    <div class="row">
        <div class="col-12">
            <h2>
                Notícias do Mercado
            </h2>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <form class="noticias" (ngSubmit)="uploadFile()" [formGroup]="uploadFileFormGroup" enctype="multipart/form-data" novalidate>
                <h3 class="pt-3 pb-2">Upload</h3>
                <div class="row">
                    <div class="form-group col-12 col-sm-6">
                        <label for="title">Título</label>
                        <input value=""
                               appOnlyLetters
                               type="text"
                               class="form-control"
                               id="title"
                               name="title"
                               maxlength="100"
                               formControlName="title"
                               required>
                        <div class="red-alert">
                            <div *ngIf="uploadFileFormGroup.get('title').invalid && (uploadFileFormGroup.get('title').dirty || uploadFileFormGroup.get('title').touched)"
                                 class="small">
                                <div *ngIf="uploadFileFormGroup.get('title').errors">Título do arquvio é obrigatório.</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-12 col-sm-3">
                        <label for="formfield">Arquivo</label>
                        <input type="file" class="form-control-file" (change)="getfile($event)" id="formfield" formControlName="file">
                        <input type="hidden" name="original" formControlName="original">
                        <div class="red-alert">
                            <div *ngIf="uploadFileFormGroup.get('file').invalid && (uploadFileFormGroup.get('file').dirty || uploadFileFormGroup.get('file').touched)"
                                 class="small">
                                <div *ngIf="uploadFileFormGroup.get('file').errors">Arquivo inválido.</div>
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-12 col-sm-3 d-flex align-items-center">
                        <button type="submit" class="btn btn-light btn-primary enviar px-5 ">Enviar</button>
                    </div>
                </div>

                <div class="row mt-3" *ngIf="saved">
                    <div class="col">
                        <div class="alert alert-success" role="alert">
                            Arquivo enviado com sucesso.
                        </div>
                    </div>
                </div>

                <div class="red-alert" *ngIf="upError">
                    <div class="small">
                        <div>Houve algum problema ao enviar o arquivo.</div>
                    </div>
                </div>

                <!--
                {{uploadFileFormGroup.status}}
                {{findInvalidControls()}}
                -->
            </form>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <h3 class="pt-3 pb-2">Notícias publicadas</h3>
        </div>
    </div>
    <div class="row border p-4 m-1 d-flex align-items-center" *ngFor="let n of noticias">
        <div class="col-5">{{n.title}}</div>
        <div class="col-5">{{n.file}}</div>
        <div class="col-2 text-right"><button class="btn btn-light" (click)="remove(n.hash_name)">remover</button></div>
    </div>
</div>